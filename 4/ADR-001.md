# ADR-042 Использование асинхронной связи для начисления бонусов менеджерам

Status: Accepted

Context: У бизнеса есть проблемы

- [Problem-040] Медленно начисляются бонусы менеджерам, потому что много кандидатов в учителя. Иногда вся система падает и не восстанавливается. 

- [Problem-050] В UI может отобразиться ошибка каких-то запросов после успешного выполнения задания. Разработчики объясняют это поведение вызовом сервиса оплаты и создания заданий. 

- [Problem-070] Менеджерам иногда начисляются бонусы дважды. Это связано с тем, что, когда кандидаты в учителя отправляют то же самое задание повторно, система тупит [Problem-050]. Разработчики объясняют тем, что управление заданиями падает, а бонусами — нет. Из-за этого бонусы попадают в два одинаковых запроса.

При начислении бонусов менеджерам достаточно eventual consistency

Decision: Для решения этих проблем, решили использовать асинхронную связь через брокер сообщений
