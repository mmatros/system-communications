# домашняя работа #0

## event storming

![event storming](/0/es.png)

## решение проблем
[Problem-010]
Для ускорения проверки задания, нужно изменить синхронную связь COMM-020. В ней будем получать идентификатор задания для кандидата. Для передачи и проверки самих заданий добавим очередь сообщений в которую будет писать сообщения сервис создания заданий, читать из очереди будет сервис найма учителей. Будем хранить копию заданий в сервисе найма.  В результате проверка будет выполняться в сервисе найма. Это должно ускорить проверку.

[Problem-020]
Изменения заданий будут стримиться в отдельную очередь и изменять копию данных в сервисе найма.

[Problem-030]
Для решения этой проблемы заменим связь COMM-060 на синхронную. В этом случае будем получать всегда актуальную версию рейтинга.

[Problem-040]
Для решения этой проблемы заменим связи COMM-040 и COMM-050 на асинхронные. Будем стримить списания и пополнения бонусов на счета менеджеров.

[Problem-050] 
Замена связей COMM-040 и COMM-050 исключит вызов сервиса оплаты. Заменим связь COMM-030 на асинхронную. И будем стримить задания которые нужно изменить в очередь для заданий на изменение.

[Problem-060] Нужно сократить расходы на скейлинг сервиса заданий. Сейчас дорого.
?

[Problem-070]
Тут нужно не отправлять транзакцию на пополнение, пока не проверится задание.  После решения Problem-010 мы проверяем задачи там же, где и генерируем пополнение списание бонусов. Для исключения дублирования сообщений при отправке в брокер можно отправлять транзакции через outbox.

[Problem-080] 
Решено вместе с Problem-010 и Problem-040.

[Problem-090]
Мы уменьшили связность системы, скорее всего это должно упростить жизнь разработчикам.

[Problem-100] Данные теряются вокруг логики выполнения заданий кандидатами в учителя.
?